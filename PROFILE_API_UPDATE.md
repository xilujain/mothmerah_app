# ุชุญุฏูุซ API endpoint ูุจูุงูุงุช ุงููุณุชุฎุฏู

## ๐ฏ **ุงููุฏู:**

ุชุญุฏูุซ ProfileRepository ูุงุณุชุฎุฏุงู ุงูุฑุงูุช ุงูุฌุฏูุฏ `http://127.0.0.1:8000/api/v1/users/me` ูุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู.

## ๐๏ธ **ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ:**

### 1. **ุชุญุฏูุซ ProfileRepository:**

#### **ุชุบููุฑ ุงูุฑุงูุช:**

```dart
// ูุจู
final response = await _dio.get(
  '/api/v1/me/profile',
  options: Options(
    headers: {
      'Authorization': 'Bearer $token',
      'Content-Type': 'application/json',
    },
  ),
);

// ุจุนุฏ
final response = await _dio.get(
  'http://127.0.0.1:8000/api/v1/users/me',
  options: Options(
    headers: {
      'Authorization': 'Bearer $token',
      'Content-Type': 'application/json',
    },
  ),
);
```

#### **ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุญุณูุฉ:**

```dart
// ูุนุงูุฌุฉ ุงูุงุณุชุฌุงุจุฉ - ูุฏ ุชููู ุงูุจูุงูุงุช ูุจุงุดุฑุฉ ุฃู ุฏุงุฎู 'data'
Map<String, dynamic> userData;
if (response.data is Map<String, dynamic>) {
  if (response.data.containsKey('data')) {
    userData = response.data['data'];
  } else {
    userData = response.data;
  }
} else {
  throw Exception('ุชูุณูู ุงูุจูุงูุงุช ุบูุฑ ุตุญูุญ');
}
```

#### **Debugging ููุตู:**

```dart
print('๐ต ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงูู API:');
print('URL: http://127.0.0.1:8000/api/v1/users/me');
print('Headers: {\'Authorization\': \'Bearer $token\', \'Content-Type\': \'application/json\'}');
print('=====================================');

print('๐ข ุงุณุชุฌุงุจุฉ API ูููุณุชุฎุฏู:');
print('Status Code: ${response.statusCode}');
print('Response Data: ${response.data}');
print('Response Data Type: ${response.data.runtimeType}');
print('=====================================');

print('๐ฑ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุณุชุฎุฑุฌุฉ:');
print('User Data: $userData');
print('=====================================');

print('๐ฏ Profile Model:');
print('ID: ${profile.id}');
print('Name: ${profile.name}');
print('Username: ${profile.username}');
print('Email: ${profile.email}');
print('Phone: ${profile.phone}');
print('Is Verified: ${profile.isVerified}');
print('=====================================');
```

### 2. **ุชุญุฏูุซ ProfileCubit:**

#### **ุชุญุณูู ุฑุณุงุฆู ุงูุชุญุฏูุซ:**

```dart
print('๐ ูุญุงููุฉ ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูู API...');
final profile = await _repository.getProfile();
_currentProfile = profile;

// Update cached data
await TokenManager.updateUserData(profile.toJson());

emit(ProfileLoaded(profile));
print('โ ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงูู API ุจูุฌุงุญ');
print('ุงูุงุณู ุงูุฌุฏูุฏ: ${profile.name}');
print('ุงุณู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ: ${profile.username}');
print('ุฑูู ุงูุฌูุงู ุงูุฌุฏูุฏ: ${profile.phone}');
print('ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงูุฌุฏูุฏ: ${profile.email}');
print('ุญุงูุฉ ุงูุชุญูู ุงูุฌุฏูุฏุฉ: ${profile.isVerified}');
print('=====================================');
```

## ๐ **ุงูุจูุงูุงุช ุงููุทุจูุนุฉ ุงูุขู:**

### **ุนูุฏ ุฌูุจ ุงูุจูุงูุงุช ูู ุงูู API:**

```
๐ต ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงูู API:
URL: http://127.0.0.1:8000/api/v1/users/me
Headers: {'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...', 'Content-Type': 'application/json'}
=====================================

๐ข ุงุณุชุฌุงุจุฉ API ูููุณุชุฎุฏู:
Status Code: 200
Response Data: {id: 1, name: ุงููุณุชุฎุฏู, username: +966500000000, email: user@example.com, phone: +966500000000, is_verified: true, ...}
Response Data Type: _Map<String, dynamic>
=====================================

๐ฑ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุณุชุฎุฑุฌุฉ:
User Data: {id: 1, name: ุงููุณุชุฎุฏู, username: +966500000000, email: user@example.com, phone: +966500000000, is_verified: true, ...}
=====================================

๐ฏ Profile Model:
ID: 1
Name: ุงููุณุชุฎุฏู
Username: +966500000000
Email: user@example.com
Phone: +966500000000
Is Verified: true
=====================================
```

### **ุนูุฏ ุชุญุฏูุซ ุงูุจูุงูุงุช:**

```
๐ ูุญุงููุฉ ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูู API...
โ ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงูู API ุจูุฌุงุญ
ุงูุงุณู ุงูุฌุฏูุฏ: ุงููุณุชุฎุฏู
ุงุณู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ: +966500000000
ุฑูู ุงูุฌูุงู ุงูุฌุฏูุฏ: +966500000000
ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงูุฌุฏูุฏ: user@example.com
ุญุงูุฉ ุงูุชุญูู ุงูุฌุฏูุฏุฉ: true
=====================================
```

## ๐ฏ **ุงููุฒุงูุง:**

### 1. **ุงูุฑุงูุช ุงูุตุญูุญ:**

- โ ุงุณุชุฎุฏุงู `http://127.0.0.1:8000/api/v1/users/me`
- โ ูุชูุงูู ูุน Backend API
- โ ุฌูุจ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ

### 2. **ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุฑูุฉ:**

- โ ูุฏุนู ุงูุจูุงูุงุช ุงููุจุงุดุฑุฉ
- โ ูุฏุนู ุงูุจูุงูุงุช ุฏุงุฎู `data` field
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ

### 3. **Debugging ุดุงูู:**

- โ ุทุจุงุนุฉ URL ูุงูู Headers
- โ ุทุจุงุนุฉ ุงูุงุณุชุฌุงุจุฉ ุงููุงููุฉ
- โ ุทุจุงุนุฉ ุงูุจูุงูุงุช ุงููุณุชุฎุฑุฌุฉ
- โ ุทุจุงุนุฉ Profile Model ุงูููุงุฆู

### 4. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:**

- โ ูุนุงูุฌุฉ 401 (ุงูุชูุงุก ุตูุงุญูุฉ ุงูุชููู)
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุฎุงุฏู
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุงุชุตุงู
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

## ๐ **ููููุฉ ุงูุงุฎุชุจุงุฑ:**

### 1. **ุดุบู ุงูุชุทุจูู:**

```bash
flutter run
```

### 2. **ุณุฌู ุงูุฏุฎูู:**

- ุฑูู ุงูุฌูุงู: `+966500000000`
- ูููุฉ ุงููุฑูุฑ: `admin_password_123`

### 3. **ุงูุชูู ูุตูุญุฉ ุงูุจุฑููุงูู:**

- ุณุชุฌุฏ ุงูุจูุงูุงุช ุงููุญููุธุฉ ูุญููุงู ุชุธูุฑ ููุฑุงู
- ุซู ูุญุงููุฉ ุชุญุฏูุซ ูู ุงูู API ุงูุฌุฏูุฏ

### 4. **ุฑุงูุจ Console:**

- ุณุชุฌุฏ ุฑุณุงุฆู ููุตูุฉ ุนู ุฌูุจ ุงูุจูุงูุงุช
- ุณุชุฌุฏ ุชูุงุตูู ุงูุงุณุชุฌุงุจุฉ ูู ุงูู API
- ุณุชุฌุฏ ุงูุจูุงูุงุช ุงููุณุชุฎุฑุฌุฉ ูุงููุนุงูุฌุฉ

## ๐ง **ููุงุญุธุงุช ูููุฉ:**

### 1. **ุงูุฑุงูุช ุงูุฌุฏูุฏ:**

- `http://127.0.0.1:8000/api/v1/users/me`
- ูุชุทูุจ Authorization header
- ูุนูุฏ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุงููุฉ

### 2. **ูุนุงูุฌุฉ ุงูุจูุงูุงุช:**

- ูุฏุนู ุชูุณููุงุช ูุฎุชููุฉ ููุงุณุชุฌุงุจุฉ
- ูุชุญูู ูู ูุฌูุฏ `data` field
- ูุณุชุฎุฑุฌ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

### 3. **ุงูุชุญุฏูุซ ุงูุชููุงุฆู:**

- ุงูุจูุงูุงุช ุงููุญููุธุฉ ุชุธูุฑ ููุฑุงู
- ูุญุงููุฉ ุชุญุฏูุซ ูู ุงูู API ูู ุงูุฎูููุฉ
- ุญูุธ ุงูุจูุงูุงุช ุงููุญุฏุซุฉ ูุญููุงู

## ๐ **ุงูุฎูุงุตุฉ:**

ุงูุขู ProfileRepository:

- โ ูุณุชุฎุฏู ุงูุฑุงูุช ุงูุตุญูุญ
- โ ูุฌูุจ ุงูุจูุงูุงุช ูู ุงูู API ุงูุฌุฏูุฏ
- โ ูุนุงูุฌ ุงูุจูุงูุงุช ุจูุฑููุฉ
- โ ูููุฑ debugging ุดุงูู
- โ ูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ

ูุฐุง ูุถูู ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุตุญูุญุฉ ูู ุงูู API! ๐
