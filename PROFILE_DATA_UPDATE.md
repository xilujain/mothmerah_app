# ุชุญุฏูุซ ุตูุญุฉ ุงูุจุฑููุงูู ูุนูุณ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุณุฌู ุงูุฏุฎูู

## ๐ฏ **ุงููุฏู:**

ุนูุณ ุจูุงูุงุช ุงูุดุฎุต ุงููุณุฌู ุงูุฏุฎูู ุนูู ุตูุญุฉ ุงูุจุฑููุงูู ุงูุฎุงุตุฉ ุจู.

## ๐๏ธ **ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ:**

### 1. **ุชุญุฏูุซ ProfileCubit:**

#### **ุชุญููู ุงูุจูุงูุงุช ูู TokenManager:**

```dart
/// Load user profile
Future<void> loadProfile() async {
  emit(ProfileLoading());

  try {
    // First try to get cached profile from TokenManager
    final cachedData = await TokenManager.getUserData();
    if (cachedData != null) {
      _currentProfile = ProfileModel.fromJson(cachedData);
      emit(ProfileLoaded(_currentProfile!));
      print('๐ฑ ุชู ุชุญููู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงูุชุฎุฒูู ุงููุญูู:');
      print('ุงูุงุณู: ${_currentProfile!.name}');
      print('ุงุณู ุงููุณุชุฎุฏู: ${_currentProfile!.username}');
      print('ุฑูู ุงูุฌูุงู: ${_currentProfile!.phone}');
      print('ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: ${_currentProfile!.email}');
      print('ุญุงูุฉ ุงูุชุญูู: ${_currentProfile!.isVerified}');
      print('=====================================');
    } else {
      print('โ ูุง ุชูุฌุฏ ุจูุงูุงุช ูุณุชุฎุฏู ูุญููุธุฉ');
      emit(ProfileError('ูุง ุชูุฌุฏ ุจูุงูุงุช ูุณุชุฎุฏู ูุญููุธุฉ'));
      return;
    }

    // Then try to fetch fresh data from API (optional)
    try {
      final profile = await _repository.getProfile();
      _currentProfile = profile;

      // Update cached data
      await TokenManager.updateUserData(profile.toJson());

      emit(ProfileLoaded(profile));
      print('๐ ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงูู API');
      print('=====================================');
    } catch (apiError) {
      print('โ๏ธ ูุดู ูู ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูู APIุ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุญููุธุฉ');
      print('API Error: $apiError');
      print('=====================================');
      // Keep using cached data if API fails
    }
  } catch (e) {
    print('โ ุฎุทุฃ ูู ุชุญููู ุจูุงูุงุช ุงููุณุชุฎุฏู: $e');
    emit(ProfileError(e.toString()));
  }
}
```

#### **ุงููุฒุงูุง:**

- โ **ุชุญููู ุณุฑูุน** - ุงูุจูุงูุงุช ูู ุงูุชุฎุฒูู ุงููุญูู ุฃููุงู
- โ **ุชุญุฏูุซ ุชููุงุฆู** - ูุญุงููุฉ ุชุญุฏูุซ ูู ุงูู API
- โ **ูุฑููุฉ** - ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุญููุธุฉ ุฅุฐุง ูุดู ุงูู API
- โ **Debugging** - ุทุจุงุนุฉ ููุตูุฉ ููุจูุงูุงุช

### 2. **ุชุญุฏูุซ ProfileView:**

#### **ูุนูููุงุช ุงููุณุชุฎุฏู ุงูููุณุนุฉ:**

```dart
// User Information Block
_buildInfoBlock(context, textStyles, 'ูุนูููุงุช ุงููุณุชุฎุฏู', [
  _buildInfoRow(
    context,
    textStyles,
    'ุงูุงุณู',
    profile?.name ?? 'ูู ูุชู ุชุญุฏูุฏ ุงูุงุณู',
    () => _showEditDialog(context, 'ุงูุงุณู', profile?.name ?? '', (value) {
      if (profile != null) {
        cubit.updateProfile(profile.copyWith(name: value));
      }
    }),
  ),
  _buildInfoRow(
    context,
    textStyles,
    'ุงุณู ุงููุณุชุฎุฏู',
    profile?.username ?? 'ูู ูุชู ุชุญุฏูุฏ ุงุณู ุงููุณุชุฎุฏู',
    () => _showEditDialog(context, 'ุงุณู ุงููุณุชุฎุฏู', profile?.username ?? '', (value) {
      if (profile != null) {
        cubit.updateProfile(profile.copyWith(username: value));
      }
    }),
  ),
  _buildInfoRow(
    context,
    textStyles,
    'ุฑูู ุงูุฌูุงู',
    profile?.phone ?? 'ูู ูุชู ุชุญุฏูุฏ ุฑูู ุงูุฌูุงู',
    () => _showEditDialog(context, 'ุฑูู ุงูุฌูุงู', profile?.phone ?? '', (value) {
      if (profile != null) {
        cubit.updateProfile(profile.copyWith(phone: value));
      }
    }),
  ),
  _buildInfoRow(
    context,
    textStyles,
    'ุงูุจุฑูุฏ ุงูุฅููุชุฑููู',
    profile?.email ?? 'ูู ูุชู ุชุญุฏูุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู',
    () => _showEditDialog(context, 'ุงูุจุฑูุฏ ุงูุฅููุชุฑููู', profile?.email ?? '', (value) {
      if (profile != null) {
        cubit.updateProfile(profile.copyWith(email: value));
      }
    }),
  ),
]),
```

#### **ุญุงูุฉ ุงูุชุญูู ุงููุญุณูุฉ:**

```dart
_buildInfoRow(
  context,
  textStyles,
  'ุญุงูุฉ ุงูุชุญูู',
  profile?.isVerified == true ? 'โ ูุญูู' : 'โ ุบูุฑ ูุญูู',
  () {
    // Handle verification status
  },
),
```

#### **ูุนูููุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑูุฉ):**

```dart
// Additional User Info Block
if (profile?.address != null || profile?.licenses != null)
  _buildInfoBlock(context, textStyles, 'ูุนูููุงุช ุฅุถุงููุฉ', [
    if (profile?.address != null)
      _buildInfoRow(
        context,
        textStyles,
        'ุงูุนููุงู',
        profile!.address!,
        () => _showEditDialog(context, 'ุงูุนููุงู', profile.address ?? '', (value) {
          cubit.updateProfile(profile.copyWith(address: value));
        }),
      ),
    if (profile?.licenses != null)
      _buildInfoRow(
        context,
        textStyles,
        'ุงูุชุฑุงุฎูุต',
        profile!.licenses!,
        () {
          // Handle licenses
        },
      ),
  ]),
```

## ๐ **ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ:**

### **ูุนูููุงุช ุงููุณุชุฎุฏู ุงูุฃุณุงุณูุฉ:**

- โ **ุงูุงุณู** - ูู ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู
- โ **ุงุณู ุงููุณุชุฎุฏู** - ุฑูู ุงูุฌูุงู ุงููุณุชุฎุฏู ูู ุชุณุฌูู ุงูุฏุฎูู
- โ **ุฑูู ุงูุฌูุงู** - ุฑูู ุงูุฌูุงู ุงููุณุฌู
- โ **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู** - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุฅู ูุฌุฏ)
- โ **ุญุงูุฉ ุงูุชุญูู** - ูุน ุฃููููุงุช ูุงุถุญุฉ (โ/โ)

### **ูุนูููุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑูุฉ):**

- โ **ุงูุนููุงู** - ุฅุฐุง ูุงู ูุชููุฑุงู
- โ **ุงูุชุฑุงุฎูุต** - ุฅุฐุง ูุงูุช ูุชููุฑุฉ

## ๐ฏ **ุงููุฒุงูุง:**

### 1. **ุนุฑุถ ุงูุจูุงูุงุช ุงููุนููุฉ:**

- โ ูุนูุณ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุณุฌู ุงูุฏุฎูู
- โ ูุง ุชูุฌุฏ ุจูุงูุงุช ููููุฉ
- โ ูุนูููุงุช ุญููููุฉ ูู TokenManager

### 2. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ:**

- โ ุฑุณุงุฆู ูุงุถุญุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช
- โ ุฃููููุงุช ูุญุงูุฉ ุงูุชุญูู
- โ ุฅููุงููุฉ ุชุนุฏูู ุงูุจูุงูุงุช

### 3. **ูุฑููุฉ ูู ุงูุนุฑุถ:**

- โ ุนุฑุถ ุงููุนูููุงุช ุงูุฅุถุงููุฉ ููุท ุฅุฐุง ูุงูุช ูุชููุฑุฉ
- โ ุฑุณุงุฆู ููุงุณุจุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช
- โ ุชุญุฏูุซ ุชููุงุฆู ูู ุงูู API

## ๐ **ููููุฉ ุงูุงุฎุชุจุงุฑ:**

### 1. **ุชุณุฌูู ุงูุฏุฎูู:**

```bash
flutter run
```

### 2. **ุงุณุชุฎุฏุงู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ:**

- ุฑูู ุงูุฌูุงู: `+966500000000`
- ูููุฉ ุงููุฑูุฑ: `admin_password_123`

### 3. **ูุฑุงูุจุฉ Console:**

```
๐ฑ ุชู ุชุญููู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงูุชุฎุฒูู ุงููุญูู:
ุงูุงุณู: ุงููุณุชุฎุฏู
ุงุณู ุงููุณุชุฎุฏู: +966500000000
ุฑูู ุงูุฌูุงู: +966500000000
ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:
ุญุงูุฉ ุงูุชุญูู: true
=====================================
```

### 4. **ุงูุชุญูู ูู ุตูุญุฉ ุงูุจุฑููุงูู:**

- โ ุนุฑุถ ุงูุงุณู: "ุงููุณุชุฎุฏู"
- โ ุนุฑุถ ุงุณู ุงููุณุชุฎุฏู: "+966500000000"
- โ ุนุฑุถ ุฑูู ุงูุฌูุงู: "+966500000000"
- โ ุนุฑุถ ุญุงูุฉ ุงูุชุญูู: "โ ูุญูู"

## ๐ง **ููุงุญุธุงุช ูููุฉ:**

### 1. **ูุตุฏุฑ ุงูุจูุงูุงุช:**

- ุงูุจูุงูุงุช ุชุฃุชู ูู `TokenManager.getUserData()`
- ูุชู ุญูุธูุง ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุงููุงุฌุญ
- ูุชู ุชุญุฏูุซูุง ูู ุงูู API ุนูุฏ ุงูุฅููุงู

### 2. **ุงูุชุญุฏูุซ ุงูุชููุงุฆู:**

- ุงูุจูุงูุงุช ุงููุญููุธุฉ ูุญููุงู ุชุธูุฑ ููุฑุงู
- ูุญุงููุฉ ุชุญุฏูุซ ูู ุงูู API ูู ุงูุฎูููุฉ
- ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุญููุธุฉ ุฅุฐุง ูุดู ุงูู API

### 3. **ุงูุชุนุฏูู:**

- ูููู ุชุนุฏูู ุฌููุน ุงูุญููู
- ุงูุชุนุฏููุงุช ุชุญูุธ ูู TokenManager
- ุชุญุฏูุซ ููุฑู ูู ุงููุงุฌูุฉ

## ๐ **ุงูุฎูุงุตุฉ:**

ุงูุขู ุตูุญุฉ ุงูุจุฑููุงูู:

- โ ุชุนูุณ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุนููุฉ
- โ ุชุนุฑุถ ุงููุนูููุงุช ูู ุชุณุฌูู ุงูุฏุฎูู
- โ ูุงุจูุฉ ููุชุนุฏูู ูุงูุชุญุฏูุซ
- โ ูุฑูุฉ ูู ุนุฑุถ ุงููุนูููุงุช ุงูุฅุถุงููุฉ

ูุฐุง ูููุฑ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุญููููุฉ ููุชูุงููุฉ! ๐
